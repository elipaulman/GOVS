<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CP0JQS9JWY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-CP0JQS9JWY');
    </script>
    
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Instructions - Attendance Processor</title>
    <!-- Favicon -->
    <link
      rel="icon"
      href="{{ url_for('static', filename='favicon.ico') }}"
      type="image/x-icon"
    />
    <!-- Bootstrap CSS -->
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script>
      (function () {
        try {
          var storageKey = 'attendance-theme';
          var storedTheme = localStorage.getItem(storageKey);
          var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          var theme = storedTheme || (prefersDark ? 'dark' : 'light');
          document.documentElement.setAttribute('data-theme', theme);
        } catch (error) {
          document.documentElement.setAttribute('data-theme', 'light');
        }
      })();
    </script>
    <style>
      * {
        box-sizing: border-box;
      }

      :root {
        --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        --container-bg: #ffffff;
        --container-shadow-primary: rgba(0, 0, 0, 0.08);
        --container-shadow-secondary: rgba(0, 0, 0, 0.04);
        --text-primary: #1a202c;
        --text-secondary: #718096;
        --text-label: #2d3748;
        --text-body: #4a5568;
        --primary-button-bg: #4299e1;
        --primary-button-hover-bg: #3182ce;
        --primary-button-text: #ffffff;
        --secondary-button-bg: #e2e8f0;
        --secondary-button-hover-bg: #cbd5e0;
        --secondary-button-text: #2d3748;
        --marker-color: #4299e1;
        --callout-bg: #fffbeb;
        --callout-border: #f59e0b;
        --callout-text: #78350f;
        --callout-strong: #92400e;
        --link-color: #4299e1;
        --link-hover-color: #3182ce;
        --theme-toggle-bg: rgba(226, 232, 240, 0.7);
        --theme-toggle-border: rgba(203, 213, 224, 0.8);
        --theme-toggle-text: #2d3748;
        --theme-toggle-hover-bg: rgba(203, 213, 224, 1);
      }

      body {
        background: var(--bg-gradient);
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0;
        padding: 20px;
        color: var(--text-primary);
        transition: background 0.3s ease, color 0.3s ease;
        color-scheme: light;
      }

      [data-theme="dark"] body,
      body[data-theme="dark"] {
        --bg-gradient: linear-gradient(135deg, #111827 0%, #1f2937 100%);
        --container-bg: #1f2933;
        --container-shadow-primary: rgba(15, 23, 42, 0.7);
        --container-shadow-secondary: rgba(15, 23, 42, 0.4);
        --text-primary: #f7fafc;
        --text-secondary: #cbd5e0;
        --text-label: #e2e8f0;
        --text-body: #e2e8f0;
        --primary-button-bg: #63b3ed;
        --primary-button-hover-bg: #4299e1;
        --primary-button-text: #0f172a;
        --secondary-button-bg: #374151;
        --secondary-button-hover-bg: #4b5563;
        --secondary-button-text: #e2e8f0;
        --marker-color: #63b3ed;
        --callout-bg: rgba(251, 191, 36, 0.12);
        --callout-border: rgba(251, 191, 36, 0.5);
        --callout-text: #fef3c7;
        --callout-strong: #fcd34d;
        --link-color: #90cdf4;
        --link-hover-color: #63b3ed;
        --theme-toggle-bg: rgba(55, 65, 81, 0.6);
        --theme-toggle-border: rgba(148, 163, 184, 0.5);
        --theme-toggle-text: #e2e8f0;
        --theme-toggle-hover-bg: rgba(75, 85, 99, 0.85);
        color-scheme: dark;
      }

      .container {
        background: var(--container-bg);
        border-radius: 16px;
        box-shadow: 0 10px 40px var(--container-shadow-primary), 0 2px 8px var(--container-shadow-secondary);
        padding: 48px;
        max-width: 720px;
        width: 100%;
        position: relative;
        transition: background 0.3s ease, box-shadow 0.3s ease;
      }

      h1 {
        font-weight: 600;
        font-size: 2rem;
        margin-bottom: 12px;
        color: var(--text-primary);
        text-align: center;
        letter-spacing: -0.5px;
      }

      .intro {
        text-align: center;
        color: var(--text-secondary);
        font-size: 0.95rem;
        margin-bottom: 36px;
        line-height: 1.5;
      }

      .section-title {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--text-label);
        margin-bottom: 16px;
        margin-top: 32px;
      }

      .section-title:first-of-type {
        margin-top: 0;
      }

      ol {
        text-align: left;
        font-size: 0.95rem;
        color: var(--text-body);
        line-height: 1.7;
        padding-left: 24px;
        margin: 0;
      }

      ol li {
        margin-bottom: 12px;
        padding-left: 8px;
      }

      ol li::marker {
        color: var(--marker-color);
        font-weight: 600;
      }

      .note {
        margin-top: 32px;
        background: var(--callout-bg);
        border-left: 4px solid var(--callout-border);
        padding: 16px 20px;
        border-radius: 8px;
        color: var(--callout-text);
        font-size: 0.9rem;
        line-height: 1.6;
      }

      .note strong {
        color: var(--callout-strong);
        display: block;
        margin-bottom: 6px;
      }

      .button-container {
        display: flex;
        justify-content: center;
        gap: 16px;
        margin-top: 36px;
        flex-wrap: wrap;
      }

      .button {
        background: var(--primary-button-bg);
        color: var(--primary-button-text);
        text-decoration: none;
        padding: 12px 28px;
        border-radius: 8px;
        font-weight: 500;
        font-size: 0.95rem;
        transition: all 0.2s ease;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .button:hover {
        background: var(--primary-button-hover-bg);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(66, 153, 225, 0.3);
        color: var(--primary-button-text);
        text-decoration: none;
      }

      .button.secondary {
        background: var(--secondary-button-bg);
        color: var(--secondary-button-text);
      }

      .button.secondary:hover {
        background: var(--secondary-button-hover-bg);
        color: var(--secondary-button-text);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .button:focus-visible {
        outline: 2px solid var(--primary-button-bg);
        outline-offset: 2px;
      }

      .theme-toggle {
        position: absolute;
        top: 24px;
        right: 24px;
        background: var(--theme-toggle-bg);
        color: var(--theme-toggle-text);
        border: 1px solid var(--theme-toggle-border);
        border-radius: 999px;
        padding: 6px 16px;
        font-size: 0.75rem;
        font-weight: 600;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        cursor: pointer;
        transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
      }

      .theme-toggle:hover {
        background: var(--theme-toggle-hover-bg);
      }

      .theme-toggle:focus-visible {
        outline: 2px solid var(--primary-button-bg);
        outline-offset: 2px;
      }

      @media (max-width: 576px) {
        .container {
          padding: 32px 24px;
        }

        h1 {
          font-size: 1.75rem;
        }

        .intro {
          font-size: 0.875rem;
        }

        .button-container {
          flex-direction: column;
          gap: 12px;
        }

        .button {
          width: 100%;
          justify-content: center;
        }

        .theme-toggle {
          position: static;
          display: inline-block;
          margin-bottom: 20px;
          margin-left: auto;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <button type="button" class="theme-toggle" id="themeToggle" aria-pressed="false">
        Dark Mode
      </button>
      <h1>How to Use</h1>
      <p class="intro">
        Follow these steps to generate your consolidated attendance report
      </p>

      <h2 class="section-title">Step-by-Step Instructions</h2>
      <ol>
        <li>Generate your weekly attendance report from VLA and save it as a CSV or Excel file.</li>
        <li>Download the emailed attendance report for all students as a CSV or Excel file.</li>
        <li>Upload both files using the upload interface on the main page.</li>
        <li>Select the desired sort order. Sorting by required hours will organize students by their start date.</li>
        <li>Choose which columns to include in the final report by checking or unchecking them.</li>
        <li>Drag and drop columns to reorder them according to your preferences.</li>
        <li>Click the "Generate Report" button to create your consolidated attendance report.</li>
        <li>The processed file will automatically download to your device.</li>
      </ol>

      <div class="note">
        <strong>Important Note</strong>
        The generated report will only include students whose names match between the VLA weekly attendance report and the full list of students. Ensure both files use consistent naming conventions for best results.
      </div>

      <div class="button-container">
        <a href="{{ url_for('index') }}" class="button">
          <span aria-hidden="true">&#8592;</span> Back to Upload
        </a>
        <a href="mailto:eli.paulman@gmail.com" class="button secondary">
          Contact Support
        </a>
      </div>
    </div>
    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var storageKey = "attendance-theme";
        var root = document.documentElement;
        var themeToggle = document.getElementById("themeToggle");

        function applyTheme(theme) {
          var nextTheme = theme === "dark" ? "dark" : "light";
          root.setAttribute("data-theme", nextTheme);
          document.body.setAttribute("data-theme", nextTheme);
          if (themeToggle) {
            var isDark = nextTheme === "dark";
            themeToggle.setAttribute("aria-pressed", isDark);
            themeToggle.textContent = isDark ? "Light Mode" : "Dark Mode";
          }
        }

        var storedTheme = null;
        try {
          storedTheme = localStorage.getItem(storageKey);
        } catch (error) {
          storedTheme = null;
        }

        var prefersDark = window.matchMedia ? window.matchMedia("(prefers-color-scheme: dark)") : null;
        var initialTheme =
          storedTheme ||
          (prefersDark && prefersDark.matches ? "dark" : root.getAttribute("data-theme") || "light");

        applyTheme(initialTheme);

        if (themeToggle) {
          themeToggle.addEventListener("click", function () {
            var currentTheme = root.getAttribute("data-theme") === "dark" ? "dark" : "light";
            var nextTheme = currentTheme === "dark" ? "light" : "dark";
            applyTheme(nextTheme);
            try {
              localStorage.setItem(storageKey, nextTheme);
            } catch (error) {
              /* localStorage may be unavailable */
            }
          });
        }

        if (prefersDark) {
          prefersDark.addEventListener("change", function (event) {
            var hasStoredTheme = false;
            try {
              hasStoredTheme = !!localStorage.getItem(storageKey);
            } catch (error) {
              hasStoredTheme = false;
            }
            if (!hasStoredTheme) {
              applyTheme(event.matches ? "dark" : "light");
            }
          });
        }
      });
    </script>
  </body>
</html>

